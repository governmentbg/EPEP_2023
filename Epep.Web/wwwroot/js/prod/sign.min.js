function showSignError(n){$("#signErrorMessage").text(n);$("#signMessageContainer").show();$("#signMessageContainer").delay(1e4).slideUp(1e3)}!function(){function n(n){this.message=n}var t="undefined"!=typeof exports?exports:self,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error;n.prototype.name="InvalidCharacterError";t.btoa||(t.btoa=function(t){for(var u,f,e=String(t),r=0,o=i,s="";e.charAt(0|r)||(o="=",r%1);s+=o.charAt(63&u>>8-r%1*8)){if(f=e.charCodeAt(r+=.75),f>255)throw new n("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");u=u<<8|f}return s});t.atob||(t.atob=function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var u,r,f=0,s=0,o="";r=e.charAt(s++);~r&&(u=f%4?64*u+r:r,f++%4)?o+=String.fromCharCode(255&u>>(-2*f&6)):0)r=i.indexOf(r);return o})}();
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2015 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/v4.5.9/LICENSE
 */
(function(n,t){"use strict";typeof define=="function"&&define.amd?define(t):typeof exports=="object"?module.exports=t():n.returnExports=t()})(this,function(){var d=Array,n=d.prototype,f=Object,g=f.prototype,gi=Function,pt=gi.prototype,e=String,o=e.prototype,s=Number,ft=s.prototype,nt=n.slice,nr=n.splice,et=n.push,wu=n.unshift,tr=n.concat,bu=n.join,u=pt.call,wt=pt.apply,w=Math.max,ot=Math.min,bt=g.toString,kt=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",ir=Function.prototype.toString,ku=/^\s*class /,rr=function(n){try{var t=ir.call(n),i=t.replace(/\/\/.*\n/g,""),r=i.replace(/\/\*[.\s\S]*\*\//g,""),u=r.replace(/\n/gm," ").replace(/ {2}/g," ");return ku.test(u)}catch(f){return!1}},du=function(n){try{return rr(n)?!1:(ir.call(n),!0)}catch(t){return!1}},gu="[object Function]",nf="[object GeneratorFunction]",h=function(n){if(!n||typeof n!="function"&&typeof n!="object")return!1;if(kt)return du(n);if(rr(n))return!1;var t=bt.call(n);return t===gu||t===nf},dt,tf=RegExp.prototype.exec,rf=function(n){try{return tf.call(n),!0}catch(t){return!1}},uf="[object RegExp]",ii,ri,or,sr,hr,cr,lr,ar,ui,ct,fi,ei,vr,yr,eu,b,pi,su,wi,bi,hu,cu,lu,ki,au,vu,yu,di,pu;dt=function(n){return typeof n!="object"?!1:kt?rf(n):bt.call(n)===uf};var c,ff=String.prototype.valueOf,ef=function(n){try{return ff.call(n),!0}catch(t){return!1}},sf="[object String]";c=function(n){return typeof n=="string"?!0:typeof n!="object"?!1:kt?ef(n):bt.call(n)===sf};var gt=f.defineProperty&&function(){var n,t;try{n={};f.defineProperty(n,"x",{enumerable:!1,value:n});for(t in n)return!1;return n.x===n}catch(i){return!1}}(),t=function(n){var t;return t=gt?function(n,t,i,r){!r&&t in n||f.defineProperty(n,t,{configurable:!0,enumerable:!1,writable:!0,value:i})}:function(n,t,i,r){!r&&t in n||(n[t]=i)},function(i,r,u){for(var f in r)n.call(r,f)&&t(i,f,r[f],u)}}(g.hasOwnProperty),st=function(n){var t=typeof n;return n===null||t!=="object"&&t!=="function"},tt=s.isNaN||function(n){return n!==n},i={ToInteger:function(n){var t=+n;return tt(t)?t=0:t!==0&&t!==1/0&&t!==-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t},ToPrimitive:function(n){var t,i,r;if(st(n))return n;if((i=n.valueOf,h(i)&&(t=i.call(n),st(t)))||(r=n.toString,h(r)&&(t=r.call(n),st(t))))return t;throw new TypeError;},ToObject:function(n){if(n==null)throw new TypeError("can't convert "+n+" to object");return f(n)},ToUint32:function(n){return n>>>0}},ni=function(){};t(pt,{bind:function(n){var t=this,r;if(!h(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);var u=nt.call(arguments,1),i,o=function(){if(this instanceof i){var r=wt.call(t,this,tr.call(u,nt.call(arguments)));return f(r)===r?r:this}return wt.call(t,n,tr.call(u,nt.call(arguments)))},s=w(0,t.length-u.length),e=[];for(r=0;r<s;r++)et.call(e,"$"+r);return i=gi("binder","return function ("+bu.call(e,",")+"){ return binder.apply(this, arguments); }")(o),t.prototype&&(ni.prototype=t.prototype,i.prototype=new ni,ni.prototype=null),i}});var v=u.bind(g.hasOwnProperty),ur=u.bind(g.toString),k=u.bind(nt),hf=wt.bind(nt),a=u.bind(o.slice),l=u.bind(o.split),cf=u.bind(o.indexOf),y=u.bind(et),ti=u.bind(g.propertyIsEnumerable),fr=u.bind(n.sort),ht=d.isArray||function(n){return ur(n)==="[object Array]"},lf=[].unshift(0)!==1;t(n,{unshift:function(){return wu.apply(this,arguments),this.length}},lf);t(d,{isArray:ht});var er=f("a"),p=er[0]!=="a"||!(0 in er),it=function(n){var t=!0,i=!0,r=!1;if(n)try{n.call("foo",function(n,i,r){typeof r!="object"&&(t=!1)});n.call([1],function(){"use strict";i=typeof this=="string"},"x")}catch(u){r=!0}return!!n&&!r&&t&&i};t(n,{forEach:function(n){var u=i.ToObject(this),r=p&&c(this)?l(this,""):u,t=-1,e=i.ToUint32(r.length),f;if(arguments.length>1&&(f=arguments[1]),!h(n))throw new TypeError("Array.prototype.forEach callback must be a function");while(++t<e)t in r&&(typeof f=="undefined"?n(r[t],t,u):n.call(f,r[t],t,u))}},!it(n.forEach));t(n,{map:function(n){var u=i.ToObject(this),r=p&&c(this)?l(this,""):u,e=i.ToUint32(r.length),o=d(e),f,t;if(arguments.length>1&&(f=arguments[1]),!h(n))throw new TypeError("Array.prototype.map callback must be a function");for(t=0;t<e;t++)t in r&&(o[t]=typeof f=="undefined"?n(r[t],t,u):n.call(f,r[t],t,u));return o}},!it(n.map));t(n,{filter:function(n){var u=i.ToObject(this),f=p&&c(this)?l(this,""):u,s=i.ToUint32(f.length),o=[],r,e,t;if(arguments.length>1&&(e=arguments[1]),!h(n))throw new TypeError("Array.prototype.filter callback must be a function");for(t=0;t<s;t++)t in f&&(r=f[t],(typeof e=="undefined"?n(r,t,u):n.call(e,r,t,u))&&y(o,r));return o}},!it(n.filter));t(n,{every:function(n){var u=i.ToObject(this),r=p&&c(this)?l(this,""):u,e=i.ToUint32(r.length),f,t;if(arguments.length>1&&(f=arguments[1]),!h(n))throw new TypeError("Array.prototype.every callback must be a function");for(t=0;t<e;t++)if(t in r&&!(typeof f=="undefined"?n(r[t],t,u):n.call(f,r[t],t,u)))return!1;return!0}},!it(n.every));t(n,{some:function(n){var u=i.ToObject(this),r=p&&c(this)?l(this,""):u,e=i.ToUint32(r.length),f,t;if(arguments.length>1&&(f=arguments[1]),!h(n))throw new TypeError("Array.prototype.some callback must be a function");for(t=0;t<e;t++)if(t in r&&(typeof f=="undefined"?n(r[t],t,u):n.call(f,r[t],t,u)))return!0;return!1}},!it(n.some));ii=!1;n.reduce&&(ii=typeof n.reduce.call("es5",function(n,t,i,r){return r})=="object");t(n,{reduce:function(n){var e=i.ToObject(this),r=p&&c(this)?l(this,""):e,f=i.ToUint32(r.length),t,u;if(!h(n))throw new TypeError("Array.prototype.reduce callback must be a function");if(f===0&&arguments.length===1)throw new TypeError("reduce of empty array with no initial value");if(t=0,arguments.length>=2)u=arguments[1];else do{if(t in r){u=r[t++];break}if(++t>=f)throw new TypeError("reduce of empty array with no initial value");}while(1);for(;t<f;t++)t in r&&(u=n(u,r[t],t,e));return u}},!ii);ri=!1;n.reduceRight&&(ri=typeof n.reduceRight.call("es5",function(n,t,i,r){return r})=="object");t(n,{reduceRight:function(n){var f=i.ToObject(this),u=p&&c(this)?l(this,""):f,e=i.ToUint32(u.length),r,t;if(!h(n))throw new TypeError("Array.prototype.reduceRight callback must be a function");if(e===0&&arguments.length===1)throw new TypeError("reduceRight of empty array with no initial value");if(t=e-1,arguments.length>=2)r=arguments[1];else do{if(t in u){r=u[t--];break}if(--t<0)throw new TypeError("reduceRight of empty array with no initial value");}while(1);if(t<0)return r;do t in u&&(r=n(r,u[t],t,f));while(t--);return r}},!ri);or=n.indexOf&&[0,1].indexOf(1,2)!==-1;t(n,{indexOf:function(n){var r=p&&c(this)?l(this,""):i.ToObject(this),u=i.ToUint32(r.length),t;if(u===0)return-1;for(t=0,arguments.length>1&&(t=i.ToInteger(arguments[1])),t=t>=0?t:w(0,u+t);t<u;t++)if(t in r&&r[t]===n)return t;return-1}},or);sr=n.lastIndexOf&&[0,1].lastIndexOf(0,-3)!==-1;t(n,{lastIndexOf:function(n){var r=p&&c(this)?l(this,""):i.ToObject(this),u=i.ToUint32(r.length),t;if(u===0)return-1;for(t=u-1,arguments.length>1&&(t=ot(t,i.ToInteger(arguments[1]))),t=t>=0?t:u-Math.abs(t);t>=0;t--)if(t in r&&n===r[t])return t;return-1}},sr);hr=function(){var n=[1,2],t=n.splice();return n.length===2&&ht(t)&&t.length===0}();t(n,{splice:function(){return arguments.length===0?[]:nr.apply(this,arguments)}},!hr);cr=function(){var t={};return n.splice.call(t,0,0,1),t.length===1}();t(n,{splice:function(n,t){if(arguments.length===0)return[];var r=arguments;return this.length=w(i.ToInteger(this.length),0),arguments.length>0&&typeof t!="number"&&(r=k(arguments),r.length<2?y(r,this.length-n):r[1]=i.ToInteger(t)),nr.apply(this,r)}},!cr);lr=function(){var n=new d(1e5);return n[8]="x",n.splice(1,1),n.indexOf("x")===7}();ar=function(){var n=256,t=[];return t[n]="a",t.splice(n+1,0,"b"),t[n]==="a"}();t(n,{splice:function(n,t){for(var u=i.ToObject(this),b=[],s=i.ToUint32(u.length),p=i.ToInteger(n),l=p<0?w(s+p,0):ot(p,s),f=ot(w(i.ToInteger(t),0),s-l),r=0,o,a,h,c,d,g,y;r<f;)o=e(l+r),v(u,o)&&(b[r]=u[o]),r+=1;if(a=k(arguments,2),h=a.length,h<f){for(r=l,d=s-f;r<d;)o=e(r+f),c=e(r+h),v(u,o)?u[c]=u[o]:delete u[c],r+=1;for(r=s,g=s-f+h;r>g;)delete u[r-1],r-=1}else if(h>f)for(r=s-f;r>l;)o=e(r+f-1),c=e(r+h-1),v(u,o)?u[c]=u[o]:delete u[c],r-=1;for(r=l,y=0;y<a.length;++y)u[r]=a[y],r+=1;return u.length=s-f+h,b}},!lr||!ar);ui=n.join;try{ct=Array.prototype.join.call("123",",")!=="1,2,3"}catch(us){ct=!0}ct&&t(n,{join:function(n){var t=typeof n=="undefined"?",":n;return ui.call(c(this)?l(this,""):this,t)}},ct);fi=[1,2].join(undefined)!=="1,2";fi&&t(n,{join:function(n){var t=typeof n=="undefined"?",":n;return ui.call(this,t)}},fi);ei=function(){for(var t=i.ToObject(this),r=i.ToUint32(t.length),n=0;n<arguments.length;)t[r+n]=arguments[n],n+=1;return t.length=r+n,r+n};vr=function(){var n={},t=Array.prototype.push.call(n,undefined);return t!==1||n.length!==1||typeof n[0]!="undefined"||!v(n,0)}();t(n,{push:function(){return ht(this)?et.apply(this,arguments):ei.apply(this,arguments)}},vr);yr=function(){var n=[],t=n.push(undefined);return t!==1||n.length!==1||typeof n[0]!="undefined"||!v(n,0)}();t(n,{push:ei},yr);t(n,{slice:function(){var n=c(this)?l(this,""):this;return hf(n,arguments)}},p);var af=function(){try{return[1,2].sort(null),[1,2].sort({}),!0}catch(n){}return!1}(),vf=function(){try{return[1,2].sort(/a/),!1}catch(n){}return!0}(),yf=function(){try{return[1,2].sort(undefined),!0}catch(n){}return!1}();t(n,{sort:function(n){if(typeof n=="undefined")return fr(this);if(!h(n))throw new TypeError("Array.prototype.sort callback must be a function");return fr(this,n)}},af||!yf||!vf);var pf=!ti({toString:null},"toString"),wf=ti(function(){},"prototype"),bf=!v("x","0"),oi=function(n){var t=n.constructor;return t&&t.prototype===n},kf={$window:!0,$console:!0,$parent:!0,$self:!0,$frame:!0,$frames:!0,$frameElement:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$external:!0},df=function(){if(typeof window=="undefined")return!1;for(var n in window)try{!kf["$"+n]&&v(window,n)&&window[n]!==null&&typeof window[n]=="object"&&oi(window[n])}catch(t){return!0}return!1}(),gf=function(n){if(typeof window=="undefined"||!df)return oi(n);try{return oi(n)}catch(t){return!1}},pr=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],ne=pr.length,wr=function(n){return ur(n)==="[object Arguments]"},te=function(n){return n!==null&&typeof n=="object"&&typeof n.length=="number"&&n.length>=0&&!ht(n)&&h(n.callee)},br=wr(arguments)?wr:te;t(f,{keys:function(n){var s=h(n),o=br(n),l=n!==null&&typeof n=="object",w=l&&c(n),t,a,i,r,p,u,f;if(!l&&!s&&!o)throw new TypeError("Object.keys called on a non-object");if(t=[],a=wf&&s,w&&bf||o)for(i=0;i<n.length;++i)y(t,e(i));if(!o)for(r in n)a&&r==="prototype"||!v(n,r)||y(t,e(r));if(pf)for(p=gf(n),u=0;u<ne;u++)f=pr[u],p&&f==="constructor"||!v(n,f)||y(t,f);return t}});var ie=f.keys&&function(){return f.keys(arguments).length===2}(1,2),re=f.keys&&function(){var n=f.keys(arguments);return arguments.length!==1||n.length!==1||n[0]!==1}(1),kr=f.keys;t(f,{keys:function(n){return br(n)?kr(k(n)):kr(n)}},!ie||re);var lt=new Date(-0xc782b5b342b24).getUTCMonth()!==0,at=new Date(-0x55d318d56a724),dr=new Date(14496624e5),ue=at.toUTCString()!=="Mon, 01 Jan -45875 11:59:59 GMT",si,hi,fe=at.getTimezoneOffset();fe<-720?(si=at.toDateString()!=="Tue Jan 02 -45875",hi=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(dr.toString())):(si=at.toDateString()!=="Mon Jan 01 -45875",hi=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(dr.toString()));var ci=u.bind(Date.prototype.getFullYear),li=u.bind(Date.prototype.getMonth),gr=u.bind(Date.prototype.getDate),rt=u.bind(Date.prototype.getUTCFullYear),ut=u.bind(Date.prototype.getUTCMonth),ai=u.bind(Date.prototype.getUTCDate),ee=u.bind(Date.prototype.getUTCDay),nu=u.bind(Date.prototype.getUTCHours),tu=u.bind(Date.prototype.getUTCMinutes),iu=u.bind(Date.prototype.getUTCSeconds),oe=u.bind(Date.prototype.getUTCMilliseconds),vi=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],yi=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ru=function(n,t){return gr(new Date(t,n,0))};t(Date.prototype,{getFullYear:function(){if(!this||!(this instanceof Date))throw new TypeError("this is not a Date object.");var n=ci(this);return n<0&&li(this)>11?n+1:n},getMonth:function(){if(!this||!(this instanceof Date))throw new TypeError("this is not a Date object.");var t=ci(this),n=li(this);return t<0&&n>11?0:n},getDate:function(){var r;if(!this||!(this instanceof Date))throw new TypeError("this is not a Date object.");var t=ci(this),i=li(this),n=gr(this);return t<0&&i>11?i===12?n:(r=ru(0,t+1),r-n+1):n},getUTCFullYear:function(){if(!this||!(this instanceof Date))throw new TypeError("this is not a Date object.");var n=rt(this);return n<0&&ut(this)>11?n+1:n},getUTCMonth:function(){if(!this||!(this instanceof Date))throw new TypeError("this is not a Date object.");var t=rt(this),n=ut(this);return t<0&&n>11?0:n},getUTCDate:function(){var r;if(!this||!(this instanceof Date))throw new TypeError("this is not a Date object.");var t=rt(this),i=ut(this),n=ai(this);return t<0&&i>11?i===12?n:(r=ru(0,t+1),r-n+1):n}},lt);t(Date.prototype,{toUTCString:function(){if(!this||!(this instanceof Date))throw new TypeError("this is not a Date object.");var u=ee(this),n=ai(this),f=ut(this),e=rt(this),t=nu(this),i=tu(this),r=iu(this);return vi[u]+", "+(n<10?"0"+n:n)+" "+yi[f]+" "+e+" "+(t<10?"0"+t:t)+":"+(i<10?"0"+i:i)+":"+(r<10?"0"+r:r)+" GMT"}},lt||ue);t(Date.prototype,{toDateString:function(){if(!this||!(this instanceof Date))throw new TypeError("this is not a Date object.");var t=this.getDay(),n=this.getDate(),i=this.getMonth(),r=this.getFullYear();return vi[t]+" "+yi[i]+" "+(n<10?"0"+n:n)+" "+r}},lt||si);(lt||hi)&&(Date.prototype.toString=function(){if(!this||!(this instanceof Date))throw new TypeError("this is not a Date object.");var o=this.getDay(),n=this.getDate(),s=this.getMonth(),h=this.getFullYear(),t=this.getHours(),i=this.getMinutes(),r=this.getSeconds(),u=this.getTimezoneOffset(),f=Math.floor(Math.abs(u)/60),e=Math.floor(Math.abs(u)%60);return vi[o]+" "+yi[s]+" "+(n<10?"0"+n:n)+" "+h+" "+(t<10?"0"+t:t)+":"+(i<10?"0"+i:i)+":"+(r<10?"0"+r:r)+" GMT"+(u>0?"-":"+")+(f<10?"0"+f:f)+(e<10?"0"+e:e)},gt&&f.defineProperty(Date.prototype,"toString",{configurable:!0,enumerable:!1,writable:!0}));var uu=-621987552e5,fu="-000001",se=Date.prototype.toISOString&&new Date(uu).toISOString().indexOf(fu)===-1,he=Date.prototype.toISOString&&new Date(-1).toISOString()!=="1969-12-31T23:59:59.999Z",ce=u.bind(Date.prototype.getTime);t(Date.prototype,{toISOString:function(){var n,i,t,r;if(!isFinite(this)||!isFinite(ce(this)))throw new RangeError("Date.prototype.toISOString called on non-finite value.");for(n=rt(this),i=ut(this),n+=Math.floor(i/12),i=(i%12+12)%12,t=[i+1,ai(this),nu(this),tu(this),iu(this)],n=(n<0?"-":n>9999?"+":"")+a("00000"+Math.abs(n),0<=n&&n<=9999?-4:-6),r=0;r<t.length;++r)t[r]=a("00"+t[r],-2);return n+"-"+k(t,0,2).join("-")+"T"+k(t,2).join(":")+"."+a("000"+oe(this),-3)+"Z"}},se||he);eu=function(){try{return Date.prototype.toJSON&&new Date(NaN).toJSON()===null&&new Date(uu).toJSON().indexOf(fu)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(n){return!1}}();eu||(Date.prototype.toJSON=function(){var n=f(this),r=i.ToPrimitive(n),t;if(typeof r=="number"&&!isFinite(r))return null;if(t=n.toISOString,!h(t))throw new TypeError("toISOString property is not callable");return t.call(n)});var le=Date.parse("+033658-09-27T01:46:40.000Z")===1e15,ae=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z")),ve=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));(ve||ae||!le)&&(b=Math.pow(2,31)-1,pi=tt(new Date(1970,0,1,0,0,0,b+1).getTime()),Date=function(n){var i=function(r,u,f,o,s,h,c){var l=arguments.length,a,v,y,w,p;return this instanceof n?(v=h,y=c,pi&&l>=7&&c>b&&(w=Math.floor(c/b)*b,p=Math.floor(w/1e3),v+=p,y-=p*1e3),a=l===1&&e(r)===r?new n(i.parse(r)):l>=7?new n(r,u,f,o,s,v,y):l>=6?new n(r,u,f,o,s,v):l>=5?new n(r,u,f,o,s):l>=4?new n(r,u,f,o):l>=3?new n(r,u,f):l>=2?new n(r,u):l>=1?new n(r instanceof n?+r:r):new n):a=n.apply(this,arguments),st(a)||t(a,{constructor:i},!0),a},o=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),h=[0,31,59,90,120,151,181,212,243,273,304,334,365],u=function(n,t){var i=t>1?1:0;return h[t]+Math.floor((n-1969+i)/4)-Math.floor((n-1901+i)/100)+Math.floor((n-1601+i)/400)+365*(n-1970)},c=function(t){var u=0,i=t,f,r;return pi&&i>b&&(f=Math.floor(i/b)*b,r=Math.floor(f/1e3),u+=r,i-=r*1e3),s(new n(1970,0,1,0,0,u,i))},r,f;for(r in n)v(n,r)&&(i[r]=n[r]);return t(i,{now:n.now,UTC:n.UTC},!0),i.prototype=n.prototype,t(i.prototype,{constructor:i},!0),f=function(t){var i=o.exec(t);if(i){var e=s(i[1]),f=s(i[2]||1)-1,h=s(i[3]||1)-1,y=s(i[4]||0),l=s(i[5]||0),a=s(i[6]||0),v=Math.floor(s(i[7]||0)*1e3),k=Boolean(i[4]&&!i[8]),p=i[9]==="-"?1:-1,w=s(i[10]||0),b=s(i[11]||0),r,d=l>0||a>0||v>0;return y<(d?24:25)&&l<60&&a<60&&v<1e3&&f>-1&&f<12&&w<24&&b<60&&h>-1&&h<u(e,f+1)-u(e,f)&&(r=((u(e,f)+h)*24+y+w*p)*60,r=((r+l+b*p)*60+a)*1e3+v,k&&(r=c(r)),-864e13<=r&&r<=864e13)?r:NaN}return n.parse.apply(this,arguments)},t(i,{parse:f}),i}(Date));Date.now||(Date.now=function(){return(new Date).getTime()});var ye=ft.toFixed&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128"),r={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function(n,t){for(var u=-1,i=t;++u<r.size;)i+=n*r.data[u],r.data[u]=i%r.base,i=Math.floor(i/r.base)},divide:function(n){for(var i=r.size,t=0;--i>=0;)t+=r.data[i],r.data[i]=Math.floor(t/n),t=t%n*r.base},numToString:function(){for(var t=r.size,n="",i;--t>=0;)(n!==""||t===0||r.data[t]!==0)&&(i=e(r.data[t]),n===""?n=i:n+=a("0000000",0,7-i.length)+i);return n},pow:function ou(n,t,i){return t===0?i:t%2==1?ou(n,t-1,i*n):ou(n*n,t/2,i)},log:function(n){for(var i=0,t=n;t>=4096;)i+=12,t/=4096;while(t>=2)i+=1,t/=2;return i}},pe=function(n){var t,i,h,u,f,l,o,c;if(t=s(n),t=tt(t)?0:Math.floor(t),t<0||t>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(i=s(this),tt(i))return"NaN";if(i<=-1e21||i>=1e21)return e(i);if(h="",i<0&&(h="-",i=-i),u="0",i>1e-21)if(f=r.log(i*r.pow(2,69,1))-69,l=f<0?i*r.pow(2,-f,1):i/r.pow(2,f,1),l*=4503599627370496,f=52-f,f>0){for(r.multiply(0,l),o=t;o>=7;)r.multiply(1e7,0),o-=7;for(r.multiply(r.pow(10,o,1),0),o=f-1;o>=23;)r.divide(8388608),o-=23;r.divide(1<<o);r.multiply(1,1);r.divide(2);u=r.numToString()}else r.multiply(0,l),r.multiply(1<<-f,0),u=r.numToString()+a("0.00000000000000000000",2,2+t);return t>0?(c=u.length,u=c<=t?h+a("0.0000000000000000000",0,t-c+2)+u:h+a(u,0,c-t)+"."+a(u,c-t)):u=h+u,u};t(ft,{toFixed:pe},ye);su=function(){try{return 1..toPrecision(undefined)==="1"}catch(n){return!0}}();wi=ft.toPrecision;t(ft,{toPrecision:function(n){return typeof n=="undefined"?wi.call(this):wi.call(this,n)}},su);"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1?function(){var n=typeof/()??/.exec("")[1]=="undefined",t=Math.pow(2,32)-1;o.split=function(r,u){var o=String(this),c;if(typeof r=="undefined"&&u===0)return[];if(!dt(r))return l(this,r,u);var e=[],p=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(r.sticky?"y":""),h=0,w,f,v,b,s=new RegExp(r.source,p+"g");for(n||(w=new RegExp("^"+s.source+"$(?!\\s)",p)),c=typeof u=="undefined"?t:i.ToUint32(u),f=s.exec(o);f;){if(v=f.index+f[0].length,v>h&&(y(e,a(o,h,f.index)),!n&&f.length>1&&f[0].replace(w,function(){for(var n=1;n<arguments.length-2;n++)typeof arguments[n]=="undefined"&&(f[n]=void 0)}),f.length>1&&f.index<o.length&&et.apply(e,k(f,1)),b=f[0].length,h=v,e.length>=c))break;s.lastIndex===f.index&&s.lastIndex++;f=s.exec(o)}return h===o.length?(b||!s.test(""))&&y(e,""):y(e,a(o,h)),e.length>c?k(e,0,c):e}}():"0".split(void 0,0).length&&(o.split=function(n,t){return typeof n=="undefined"&&t===0?[]:l(this,n,t)});bi=o.replace;hu=function(){var n=[];return"x".replace(/x(.)?/g,function(t,i){y(n,i)}),n.length===1&&typeof n[0]=="undefined"}();hu||(o.replace=function(n,t){var r=h(t),u=dt(n)&&/\)[*?]/.test(n.source),i;return r&&u?(i=function(i){var u=arguments.length,f=n.lastIndex,r;return n.lastIndex=0,r=n.exec(i)||[],n.lastIndex=f,y(r,arguments[u-2],arguments[u-1]),t.apply(this,r)},bi.call(this,n,i)):bi.call(this,n,t)});cu=o.substr;lu="".substr&&"0b".substr(-1)!=="b";t(o,{substr:function(n,t){var i=n;return n<0&&(i=w(this.length+n,0)),cu.call(this,i,t)}},lu);var vt="  \n\x0b\f\r   ᠎             　\u2028\u2029﻿",yt="["+vt+"]",we=new RegExp("^"+yt+yt+"*"),be=new RegExp(yt+yt+"*$"),ke=o.trim&&(vt.trim()||!"​".trim());t(o,{trim:function(){if(typeof this=="undefined"||this===null)throw new TypeError("can't convert "+this+" to object");return e(this).replace(we,"").replace(be,"")}},ke);ki=u.bind(String.prototype.trim);au=o.lastIndexOf&&"abcあい".lastIndexOf("あい",2)!==-1;t(o,{lastIndexOf:function(n){var u;if(typeof this=="undefined"||this===null)throw new TypeError("can't convert "+this+" to object");for(var f=e(this),o=e(n),h=arguments.length>1?s(arguments[1]):NaN,l=tt(h)?Infinity:i.ToInteger(h),c=ot(w(l,0),f.length),r=o.length,t=c+r;t>0;)if(t=w(0,t-r),u=cf(a(f,t,c+r),o),u!==-1)return t+u;return-1}},au);vu=o.lastIndexOf;t(o,{lastIndexOf:function(){return vu.apply(this,arguments)}},o.lastIndexOf.length!==1);(parseInt(vt+"08")!==8||parseInt(vt+"0x16")!==22)&&(parseInt=function(n){var t=/^[\-+]?0[xX]/;return function(i,r){var u=ki(String(i)),f=s(r)||(t.test(u)?16:10);return n(u,f)}}(parseInt));1/parseFloat("-0")!=-Infinity&&(parseFloat=function(n){return function(t){var i=ki(String(t)),r=n(i);return r===0&&a(i,0,1)==="-"?-0:r}}(parseFloat));String(new RangeError("test"))!=="RangeError: test"&&(yu=function(){var n,t;if(typeof this=="undefined"||this===null)throw new TypeError("can't convert "+this+" to object");return(n=this.name,typeof n=="undefined"?n="Error":typeof n!="string"&&(n=e(n)),t=this.message,typeof t=="undefined"?t="":typeof t!="string"&&(t=e(t)),!n)?t:t?n+": "+t:n},Error.prototype.toString=yu);gt&&(di=function(n,t){if(ti(n,t)){var i=Object.getOwnPropertyDescriptor(n,t);i.configurable&&(i.enumerable=!1,Object.defineProperty(n,t,i))}},di(Error.prototype,"message"),Error.prototype.message!==""&&(Error.prototype.message=""),di(Error.prototype,"name"));String(/a/gim)!=="/a/gim"&&(pu=function(){var n="/"+this.source+"/";return this.global&&(n+="g"),this.ignoreCase&&(n+="i"),this.multiline&&(n+="m"),n},RegExp.prototype.toString=pu)});
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2015 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/v4.5.9/LICENSE
 */
(function(n,t){"use strict";typeof define=="function"&&define.amd?define(t):typeof exports=="object"?module.exports=t():n.returnExports=t()})(this,function(){var t=Function.call,n=Object.prototype,r=t.bind(n.hasOwnProperty),g=t.bind(n.propertyIsEnumerable),nt=t.bind(n.toString),v,y,s,h,u=r(n,"__defineGetter__"),i,c,p,w,f,b,a,k,d,e,o;if(u&&(v=t.bind(n.__defineGetter__),y=t.bind(n.__defineSetter__),s=t.bind(n.__lookupGetter__),h=t.bind(n.__lookupSetter__)),i=function(n){return n==null||typeof n!="object"&&typeof n!="function"},Object.getPrototypeOf||(Object.getPrototypeOf=function(t){var i=t.__proto__;return i||i===null?i:nt(t.constructor)==="[object Function]"?t.constructor.prototype:t instanceof Object?n:null}),c=function(n){try{return n.sentinel=0,Object.getOwnPropertyDescriptor(n,"sentinel").value===0}catch(t){return!1}},Object.defineProperty&&(p=c({}),w=typeof document=="undefined"||c(document.createElement("div")),w&&p||(f=Object.getOwnPropertyDescriptor)),(!Object.getOwnPropertyDescriptor||f)&&(b="Object.getOwnPropertyDescriptor called on a non-object: ",Object.getOwnPropertyDescriptor=function(t,e){var o,v,a,c,l;if(i(t))throw new TypeError(b+t);if(f)try{return f.call(Object,t,e)}catch(y){}return r(t,e)?(o={enumerable:g(t,e),configurable:!0},u&&(v=t.__proto__,a=t!==n,a&&(t.__proto__=n),c=s(t,e),l=h(t,e),a&&(t.__proto__=v),c||l))?(c&&(o.get=c),l&&(o.set=l),o):(o.value=t[e],o.writable=!0,o):o}),Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(n){return Object.keys(n)}),!Object.create){var l,tt=!({__proto__:null}instanceof Object),it=function(){if(!document.domain)return!1;try{return!!new ActiveXObject("htmlfile")}catch(n){return!1}},rt=function(){var i,n,t;return n=new ActiveXObject("htmlfile"),t="script",n.write("<"+t+"><\/"+t+">"),n.close(),i=n.parentWindow.Object.prototype,n=null,i},ut=function(){var n=document.createElement("iframe"),t=document.body||document.documentElement,i;return n.style.display="none",t.appendChild(n),n.src="javascript:",i=n.contentWindow.Object.prototype,t.removeChild(n),n=null,i};l=tt||typeof document=="undefined"?function(){return{__proto__:null}}:function(){var n=it()?rt():ut(),t;return delete n.constructor,delete n.hasOwnProperty,delete n.propertyIsEnumerable,delete n.isPrototypeOf,delete n.toLocaleString,delete n.toString,delete n.valueOf,t=function(){},t.prototype=n,l=function(){return new t},new t};Object.create=function(n,t){var r,u=function(){};if(n===null)r=l();else{if(n!==null&&i(n))throw new TypeError("Object prototype may only be an Object or null");u.prototype=n;r=new u;r.__proto__=n}return t!==void 0&&Object.defineProperties(r,t),r}}if(a=function(n){try{return Object.defineProperty(n,"sentinel",{}),"sentinel"in n}catch(t){return!1}},Object.defineProperty&&(k=a({}),d=typeof document=="undefined"||a(document.createElement("div")),k&&d||(e=Object.defineProperty,o=Object.defineProperties)),!Object.defineProperty||e){var ft="Property description must be an object: ",et="Object.defineProperty called on non-object: ",ot="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(t,r,f){var l,o,c;if(i(t))throw new TypeError(et+t);if(i(f))throw new TypeError(ft+f);if(e)try{return e.call(Object,t,r,f)}catch(a){}if("value"in f)u&&(s(t,r)||h(t,r))?(l=t.__proto__,t.__proto__=n,delete t[r],t[r]=f.value,t.__proto__=l):t[r]=f.value;else{if(o="get"in f,c="set"in f,!u&&(o||c))throw new TypeError(ot);o&&v(t,r,f.get);c&&y(t,r,f.set)}return t}}(!Object.defineProperties||o)&&(Object.defineProperties=function(n,t){if(o)try{return o.call(Object,n,t)}catch(i){}return Object.keys(t).forEach(function(i){i!=="__proto__"&&Object.defineProperty(n,i,t[i])}),n});Object.seal||(Object.seal=function(n){if(Object(n)!==n)throw new TypeError("Object.seal can only be called on Objects.");return n});Object.freeze||(Object.freeze=function(n){if(Object(n)!==n)throw new TypeError("Object.freeze can only be called on Objects.");return n});try{Object.freeze(function(){})}catch(ti){Object.freeze=function(n){return function(t){return typeof t=="function"?t:n(t)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(n){if(Object(n)!==n)throw new TypeError("Object.preventExtensions can only be called on Objects.");return n});Object.isSealed||(Object.isSealed=function(n){if(Object(n)!==n)throw new TypeError("Object.isSealed can only be called on Objects.");return!1});Object.isFrozen||(Object.isFrozen=function(n){if(Object(n)!==n)throw new TypeError("Object.isFrozen can only be called on Objects.");return!1});Object.isExtensible||(Object.isExtensible=function(n){var t,i;if(Object(n)!==n)throw new TypeError("Object.isExtensible can only be called on Objects.");for(t="";r(n,t);)t+="?";return n[t]=!0,i=r(n,t),delete n[t],i})});
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   3.2.2+39aa2571
 */
(function(){"use strict";function kt(n){return"function"==typeof n||"object"==typeof n&&null!==n}function it(n){return"function"==typeof n}function dt(n){k=n}function gt(n){u=n}function ni(){return function(){process.nextTick(f)}}function ti(){return function(){ct(f)}}function ii(){var n=0,i=new pt(f),t=document.createTextNode("");return i.observe(t,{characterData:!0}),function(){t.data=n=++n%2}}function ri(){var n=new MessageChannel;return n.port1.onmessage=f,function(){n.port2.postMessage(0)}}function rt(){return function(){setTimeout(f,1)}}function f(){for(var t,i,n=0;o>n;n+=2)t=s[n],i=s[n+1],t(i),s[n]=void 0,s[n+1]=void 0;o=0}function ui(){try{var t=require,n=t("vertx");return ct=n.runOnLoop||n.runOnContext,ti()}catch(i){return rt()}}function fi(n,t){var f=this,i=new this.constructor(e),r,o;return void 0===i[y]&&st(i),r=f._state,r?(o=arguments[r-1],u(function(){ot(r,i,o,f._result)})):w(f,i,n,t),i}function ei(n){var i=this,t;return n&&"object"==typeof n&&n.constructor===i?n:(t=new i(e),l(t,n),t)}function e(){}function oi(){return new TypeError("You cannot resolve a promise with itself")}function si(){return new TypeError("A promises callback cannot return that same promise.")}function ut(n){try{return n.then}catch(t){return p.error=t,p}}function hi(n,t,i,r){try{n.call(t,i,r)}catch(u){return u}}function ci(t,r,f){u(function(t){var u=!1,e=hi(f,r,function(n){u||(u=!0,r!==n?l(t,n):i(t,n))},function(i){u||(u=!0,n(t,i))},"Settle: "+(t._label||" unknown promise"));!u&&e&&(u=!0,n(t,e))},t)}function li(t,r){r._state===v?i(t,r._result):r._state===c?n(t,r._result):w(r,void 0,function(n){l(t,n)},function(i){n(t,i)})}function ft(t,r,u){r.constructor===t.constructor&&u===d&&constructor.resolve===g?li(t,r):u===p?n(t,p.error):void 0===u?i(t,r):it(u)?ci(t,r,u):i(t,r)}function l(t,r){t===r?n(t,oi()):kt(r)?ft(t,r,ut(r)):i(t,r)}function ai(n){n._onerror&&n._onerror(n._result);b(n)}function i(n,t){n._state===h&&(n._result=t,n._state=v,0!==n._subscribers.length&&u(b,n))}function n(n,t){n._state===h&&(n._state=c,n._result=t,u(ai,n))}function w(n,t,i,r){var f=n._subscribers,e=f.length;n._onerror=null;f[e]=t;f[e+v]=i;f[e+c]=r;0===e&&n._state&&u(b,n)}function b(n){var i=n._subscribers,e=n._state,r,u,f,t;if(0!==i.length){for(f=n._result,t=0;t<i.length;t+=3)r=i[t],u=i[t+e],r?ot(e,r,u,f):u(f);n._subscribers.length=0}}function et(){this.error=null}function vi(n,t){try{return n(t)}catch(i){return nt.error=i,nt}}function ot(t,r,u,f){var e,s,o,a,y=it(u);if(y){if(e=vi(u,f),e===nt?(a=!0,s=e.error,e=null):o=!0,r===e)return void n(r,si())}else e=f,o=!0;r._state!==h||(y&&o?l(r,e):a?n(r,s):t===v?i(r,e):t===c&&n(r,e))}function yi(t,i){try{i(function(n){l(t,n)},function(i){n(t,i)})}catch(r){n(t,r)}}function pi(){return wt++}function st(n){n[y]=wt++;n._state=void 0;n._result=void 0;n._subscribers=[]}function wi(n){return new bt(this,n).promise}function bi(n){var t=this;return new t(at(n)?function(i,r){for(var f=n.length,u=0;f>u;u++)t.resolve(n[u]).then(i,r)}:function(n,t){t(new TypeError("You must pass an array to race."))})}function ki(t){var r=this,i=new r(e);return n(i,t),i}function di(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");}function gi(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}function t(n){this[y]=pi();this._result=this._state=void 0;this._subscribers=[];e!==n&&("function"!=typeof n&&di(),this instanceof t?yi(this,n):gi())}function a(t,r){this._instanceConstructor=t;this.promise=new t(e);this.promise[y]||st(this.promise);at(r)?(this._input=r,this.length=r.length,this._remaining=r.length,this._result=new Array(this.length),0===this.length?i(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&i(this.promise,this._result))):n(this.promise,nr())}function nr(){return new Error("Array Methods must be provided an Array")}function tr(){var n,t;if("undefined"!=typeof global)n=global;else if("undefined"!=typeof self)n=self;else try{n=Function("return this")()}catch(i){throw new Error("polyfill failed because global object is unavailable in this environment");}t=n.Promise;(!t||"[object Promise]"!==Object.prototype.toString.call(t.resolve())||t.cast)&&(n.Promise=r)}var ht,bt,tt;ht=Array.isArray?Array.isArray:function(n){return"[object Array]"===Object.prototype.toString.call(n)};var ct,k,lt,at=ht,o=0,u=function(n,t){s[o]=n;s[o+1]=t;o+=2;2===o&&(k?k(f):lt())},vt="undefined"!=typeof window?window:void 0,yt=vt||{},pt=yt.MutationObserver||yt.WebKitMutationObserver,ir="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),rr="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,s=new Array(1e3);lt=ir?ni():pt?ii():rr?ri():void 0===vt&&"function"==typeof require?ui():rt();var d=fi,g=ei,y=Math.random().toString(36).substring(16),h=void 0,v=1,c=2,p=new et,nt=new et,wt=0,ur=wi,fr=bi,er=ki,r=t;t.all=ur;t.race=fr;t.resolve=g;t.reject=er;t._setScheduler=dt;t._setAsap=gt;t._asap=u;t.prototype={constructor:t,then:d,"catch":function(n){return this.then(null,n)}};bt=a;a.prototype._enumerate=function(){for(var t=this.length,i=this._input,n=0;this._state===h&&t>n;n++)this._eachEntry(i[n],n)};a.prototype._eachEntry=function(n,t){var i=this._instanceConstructor,o=i.resolve,u,f;o===g?(u=ut(n),u===d&&n._state!==h?this._settledAt(n._state,t,n._result):"function"!=typeof u?(this._remaining--,this._result[t]=n):i===r?(f=new i(e),ft(f,n,u),this._willSettleAt(f,t)):this._willSettleAt(new i(function(t){t(n)}),t)):this._willSettleAt(o(n),t)};a.prototype._settledAt=function(t,r,u){var f=this.promise;f._state===h&&(this._remaining--,t===c?n(f,u):this._result[r]=u);0===this._remaining&&i(f,this._result)};a.prototype._willSettleAt=function(n,t){var i=this;w(n,void 0,function(n){i._settledAt(v,t,n)},function(n){i._settledAt(c,t,n)})};tt=tr;r.Promise=r;r.polyfill=tt;"function"==typeof define&&define.amd?define(function(){return r}):"undefined"!=typeof module&&module.exports?module.exports=r:"undefined"!=typeof this&&(this.Promise=r);tt()}).call(this);!function(n){"use strict";function f(n){if("string"!=typeof n&&(n=String(n)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(n))throw new TypeError("Invalid character in header field name");return n.toLowerCase()}function o(n){return"string"!=typeof n&&(n=String(n)),n}function t(n){this.map={};n instanceof t?n.forEach(function(n,t){this.append(t,n)},this):n&&Object.getOwnPropertyNames(n).forEach(function(t){this.append(t,n[t])},this)}function e(n){return n.bodyUsed?Promise.reject(new TypeError("Already read")):void(n.bodyUsed=!0)}function s(n){return new Promise(function(t,i){n.onload=function(){t(n.result)};n.onerror=function(){i(n.error)}})}function a(n){var t=new FileReader;return t.readAsArrayBuffer(n),s(t)}function v(n){var t=new FileReader;return t.readAsText(n),s(t)}function h(){return this.bodyUsed=!1,this._initBody=function(n){if(this._bodyInit=n,"string"==typeof n)this._bodyText=n;else if(u.blob&&Blob.prototype.isPrototypeOf(n))this._bodyBlob=n;else if(u.formData&&FormData.prototype.isPrototypeOf(n))this._bodyFormData=n;else if(n){if(!u.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(n))throw new Error("unsupported BodyInit type");}else this._bodyText="";this.headers.get("content-type")||("string"==typeof n?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type&&this.headers.set("content-type",this._bodyBlob.type))},u.blob?(this.blob=function(){var n=e(this);if(n)return n;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(a)},this.text=function(){var n=e(this);if(n)return n;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var n=e(this);return n?n:Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function y(n){var t=n.toUpperCase();return c.indexOf(t)>-1?t:n}function r(n,i){i=i||{};var u=i.body;if(r.prototype.isPrototypeOf(n)){if(n.bodyUsed)throw new TypeError("Already read");this.url=n.url;this.credentials=n.credentials;i.headers||(this.headers=new t(n.headers));this.method=n.method;this.mode=n.mode;u||(u=n._bodyInit,n.bodyUsed=!0)}else this.url=n;if(this.credentials=i.credentials||this.credentials||"omit",(i.headers||!this.headers)&&(this.headers=new t(i.headers)),this.method=y(i.method||this.method||"GET"),this.mode=i.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&u)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(u)}function p(n){var t=new FormData;return n.trim().split("&").forEach(function(n){if(n){var i=n.split("="),r=i.shift().replace(/\+/g," "),u=i.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(u))}}),t}function w(n){var i=new t,r=(n.getAllResponseHeaders()||"").trim().split("\n");return r.forEach(function(n){var t=n.trim().split(":"),r=t.shift().trim(),u=t.join(":").trim();i.append(r,u)}),i}function i(n,i){i||(i={});this.type="default";this.status=i.status;this.ok=this.status>=200&&this.status<300;this.statusText=i.statusText;this.headers=i.headers instanceof t?i.headers:new t(i.headers);this.url=i.url||"";this._initBody(n)}var u,c,l;n.fetch||(t.prototype.append=function(n,t){n=f(n);t=o(t);var i=this.map[n];i||(i=[],this.map[n]=i);i.push(t)},t.prototype["delete"]=function(n){delete this.map[f(n)]},t.prototype.get=function(n){var t=this.map[f(n)];return t?t[0]:null},t.prototype.getAll=function(n){return this.map[f(n)]||[]},t.prototype.has=function(n){return this.map.hasOwnProperty(f(n))},t.prototype.set=function(n,t){this.map[f(n)]=[o(t)]},t.prototype.forEach=function(n,t){Object.getOwnPropertyNames(this.map).forEach(function(i){this.map[i].forEach(function(r){n.call(t,r,i,this)},this)},this)},u={blob:"FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(n){return!1}}(),formData:"FormData"in n,arrayBuffer:"ArrayBuffer"in n},c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],r.prototype.clone=function(){return new r(this)},h.call(r.prototype),h.call(i.prototype),i.prototype.clone=function(){return new i(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new t(this.headers),url:this.url})},i.error=function(){var n=new i(null,{status:0,statusText:""});return n.type="error",n},l=[301,302,303,307,308],i.redirect=function(n,t){if(-1===l.indexOf(t))throw new RangeError("Invalid status code");return new i(null,{status:t,headers:{location:n}})},n.Headers=t,n.Request=r,n.Response=i,n.fetch=function(n,f){return new Promise(function(e,o){function c(){return"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0}var h,s;(h=r.prototype.isPrototypeOf(n)&&!f?n:new r(n,f),window.XDomainRequest)?(s=new window.XDomainRequest,s.onprogress=function(){},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.onload=function(){var n={status:200,statusText:"OK",headers:new t,url:null},r=s.responseText;e(new i(r,n))},s.onerror=function(){o(new TypeError("Network request failed"))},s.open(h.method,h.url,!0),s.send("undefined"==typeof h._bodyInit?null:h._bodyInit)):(s=new XMLHttpRequest,s.onload=function(){var n=1223===s.status?204:s.status,t,r;if(100>n||n>599)return void o(new TypeError("Network request failed"));t={status:n,statusText:s.statusText,headers:w(s),url:c()};r="response"in s?s.response:s.responseText;e(new i(r,t))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.open(h.method,h.url,!0),"include"===h.credentials&&(s.withCredentials=!0),"responseType"in s&&u.blob&&(s.responseType="blob"),h.headers.forEach(function(n,t){s.setRequestHeader(t,n)}),s.send("undefined"==typeof h._bodyInit?null:h._bodyInit))})},n.fetch.polyfill=!0)}("undefined"!=typeof self?self:this),function(n,t){"use strict";typeof define=="function"&&define.amd?define(t):typeof module!="undefined"&&module.exports?module.exports=t():n.SCS=t()}(this,function(n){"use strict";var t={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(n){var e="",o,i,r,h,c,s,u,f=0;for(n=t._utf8_encode(n);f<n.length;)o=n.charCodeAt(f++),i=n.charCodeAt(f++),r=n.charCodeAt(f++),h=o>>2,c=(o&3)<<4|i>>4,s=(i&15)<<2|r>>6,u=r&63,isNaN(i)?s=u=64:isNaN(r)&&(u=64),e=e+this._keyStr.charAt(h)+this._keyStr.charAt(c)+this._keyStr.charAt(s)+this._keyStr.charAt(u);return e},decode:function(n){var i="",o,s,h,c,f,u,e,r=0;for(n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");r<n.length;)c=this._keyStr.indexOf(n.charAt(r++)),f=this._keyStr.indexOf(n.charAt(r++)),u=this._keyStr.indexOf(n.charAt(r++)),e=this._keyStr.indexOf(n.charAt(r++)),o=c<<2|f>>4,s=(f&15)<<4|u>>2,h=(u&3)<<6|e,i=i+String.fromCharCode(o),u!=64&&(i=i+String.fromCharCode(s)),e!=64&&(i=i+String.fromCharCode(h));return t._utf8_decode(i)},_utf8_encode:function(n){var i,r,t;for(n=n.replace(/\r\n/g,"\n"),i="",r=0;r<n.length;r++)t=n.charCodeAt(r),t<128?i+=String.fromCharCode(t):t>127&&t<2048?(i+=String.fromCharCode(t>>6|192),i+=String.fromCharCode(t&63|128)):(i+=String.fromCharCode(t>>12|224),i+=String.fromCharCode(t>>6&63|128),i+=String.fromCharCode(t&63|128));return i},_utf8_decode:function(n){for(var u="",t=0,r,f,i=r=f=0;t<n.length;)i=n.charCodeAt(t),i<128?(u+=String.fromCharCode(i),t++):i>191&&i<224?(r=n.charCodeAt(t+1),u+=String.fromCharCode((i&31)<<6|r&63),t+=2):(r=n.charCodeAt(t+1),f=n.charCodeAt(t+2),u+=String.fromCharCode((i&15)<<12|(r&63)<<6|f&63),t+=3);return u}},u=function(t,i,r){r===n&&(r=i===n?"GET":"POST");switch(r){case"GET":case"HEAD":return fetch(t,{method:r});default:return fetch(t,{method:r,cache:"no-store",body:JSON.stringify(i)})}},o=function(t){return new Promise(function(i,r){var f=["http://127.0.0.1:8090","https://127.0.0.1:8089","http://127.0.0.1:23125","https://127.0.0.1:23124","http://127.0.0.1:53951","https://127.0.0.1:53950"],e=0;f.forEach(function(o){u(o+"/version").then(function(n){if(parseInt(n.status,10)!==200)throw new Error(n.statusText);return n.json()}).then(function(r){if(r.version===n||r.httpMethods===n||r.contentTypes===n||r.signatureTypes===n||r.selectorAvailable===n||r.hashAlgorithms===n)throw new Error("Invalid SCS version response");if(t){var u,f,e;if(typeof t=="function"){if(!t(r))throw new Error("Did not satisfy features");}else for(u in t)if(t.hasOwnProperty(u)){if(!r[u])throw new Error("Missing required key in version response");if(typeof r[u]=="boolean"&&r[u]!==t[u])throw new Error("Invalid required boolean value");typeof r[u]=="string"&&(f=r[u].split(",").map(function(n){return n.trim()}),e=t[u].split(",").map(function(n){return n.trim()}),e.forEach(function(n){if(f.indexOf(n)===-1)throw new Error("Missing required array item");}))}}return i({url:o,version:r})}).then(null,function(){++e>=f.length&&r(new Error("No compatible SCS found"))})})})},f=function(n,t){return(i?i:r()).then(function(i){return u(i.url+"/"+n,t).then(function(n){if(parseInt(n.status,10)!==200)throw new Error(n.statusText);return n}).then(function(n){return n.json()}).then(function(n){if(!n.status||n.status.toLowerCase()!=="ok"){var t=Error(n.reasonText||"Operation failed");t.response=n;throw t;}return n})})},r=function(n,t,r,u){n=n||e||signToolsPath;e=n;r=r||25;u=u||5e3;var f=0;return i=new Promise(function(i,e){var s=function(){o(t).then(function(n){i(n)}).then(null,function(){f===0&&(location.href=n);++f>=r?e("Could not discover service"):setTimeout(s,u)})};s()})},i=null,e=null;return{version:function(){return(i?i:r()).then(function(n){return n.version})},sign:function(n){return typeof n=="string"&&(n={content:t.encode(n)}),f("sign",n)},Base64Encode:function(n){return t.encode(n)},Base64Decode:function(n){return t.decode(n)},invoke:f,get:r}}),function(n,t){"use strict";typeof define=="function"&&define.amd?define(["scs"],t):typeof module!="undefined"&&module.exports?module.exports=t(require("scs")):t(n.SCS)}(this,function(n){"use strict";n.signFile=function(){return n.invoke("signer/signFile",{})};n.signFile=function(t){return n.invoke("signer/signFile",{compress:t})};n.signXML=function(t){return n.invoke("signer/sign",{signatureType:"xmldsig",content:n.Base64Encode(t)})};n.signXML=function(t,i){return n.invoke("signer/sign",{signatureType:"xmldsig",elementID:i,content:n.Base64Encode(t)})};n.signEx=function(t,i,r){return n.invoke("signer/sign",{signatureType:"signature",charset:i,newline:r,content:n.Base64Encode(t)})};n.signWin=function(t){return n.invoke("signer/sign",{signatureType:"signature",charset:"windows-1251",newline:"crlf",content:n.Base64Encode(t)})};n.signDigest=function(t){return n.invoke("signer/signDigest",{signatureType:"signature",content:n.Base64Encode(t)})};n.signRaw=function(t){return n.invoke("signer/sign",{signatureType:"raw",content:t})};n.signMultiple=function(t){for(var r=[],i=0;i<t.length;i++)r.push(n.Base64Encode(t[i]));return n.invoke("signer/sign",{signatureType:"signature",content:r})};n.signDigestMultiple=function(t){for(var r=[],i=0;i<t.length;i++)r.push(n.Base64Encode(t[i]));return n.invoke("signer/signDigest",{signatureType:"signature",content:r})};n.signDigestSID=function(t,i){return n.invoke("signer/signDigest",{signatureType:"signature",content:n.Base64Encode(t),sid:i})};n.signDigestSID=function(t,i,r){return n.invoke("signer/signDigest",{signatureType:"signature",content:n.Base64Encode(t),sid:i,pades:r})};n.signRawSID=function(t,i){return n.invoke("signer/sign",{signatureType:"raw",content:t,sid:i})};n.signRawDigestSID=function(t,i){return n.invoke("signer/signDigest",{signatureType:"raw",content:n.Base64Encode(t),sid:i})};n.signSID=function(t,i){return n.invoke("signer/sign",{signatureType:"signature",content:n.Base64Encode(t),sid:i})};n.selectSigner=function(){return n.invoke("signer/selectSigner",{})};n.selectSigner=function(t,i){return n.invoke("signer/selectSigner",{sn:t,issuerCN:i})};n.clearSigner=function(){return n.invoke("signer/clearSigner",{})}});$(function(){var n=$(".pdfSigner");SCS.get(signToolsPath).then(function(){n.find("button.submit").removeAttr("disabled")}).then(null,function(n){showSignError("ERROR:\r\n"+n.message)});$(document).on("click","button.submit",function(n){var t,r,i;return(n.preventDefault(),t=$(n.currentTarget).parents("form:first"),$(t).find("button.submit").attr("disabled",!0),r=$(t).find("#PdfHash").val(),!r.length)?showSignError("Не сте въвели хеш за подписване"):(i=sessionStorage.getItem("eiss_sign_sid"),i||(i=""),SCS.signDigestSID(r,i).then(function(n){$(t).find("#Signature").val(n.signature);$(t).find("#ErrorCode").val(n.errorCode);sessionStorage.setItem("eiss_sign_sid",n.sid);$(t).submit()}).then(null,function(n){checkError?checkError(n.response.errorCode):showSignError("ERROR:\r\n"+n.message);$(t).find("button.submit").removeAttr("disabled")}),!1)});$(document).on("click","button.sign-close",()=>$("#signMessageContainer").hide())});